\hypertarget{classgzfilebuf}{\section{gzfilebuf Class Reference}
\label{classgzfilebuf}\index{gzfilebuf@{gzfilebuf}}
}


Gzipped file stream buffer class.  




{\ttfamily \#include $<$zfstream.\+h$>$}



Inheritance diagram for gzfilebuf\+:


Collaboration diagram for gzfilebuf\+:
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classgzfilebuf_ae1fbc989b2dae79dba798556542c147c}{\hyperlink{classgzfilebuf}{gzfilebuf} $\ast$ {\bfseries open} (const char $\ast$name, int io\+\_\+mode)}\label{classgzfilebuf_ae1fbc989b2dae79dba798556542c147c}

\item 
\hypertarget{classgzfilebuf_a3ececdeaa35a8b606182cc23c9908891}{\hyperlink{classgzfilebuf}{gzfilebuf} $\ast$ {\bfseries attach} (int file\+\_\+descriptor, int io\+\_\+mode)}\label{classgzfilebuf_a3ececdeaa35a8b606182cc23c9908891}

\item 
\hypertarget{classgzfilebuf_a18e628926f455f41d7715c2ddd9c0e64}{\hyperlink{classgzfilebuf}{gzfilebuf} $\ast$ {\bfseries close} ()}\label{classgzfilebuf_a18e628926f455f41d7715c2ddd9c0e64}

\item 
\hypertarget{classgzfilebuf_a8bbfda3e29baf20e4330e3a9d7ee4a54}{int {\bfseries setcompressionlevel} (int comp\+\_\+level)}\label{classgzfilebuf_a8bbfda3e29baf20e4330e3a9d7ee4a54}

\item 
\hypertarget{classgzfilebuf_a47d4b9f1257fd12dd21847b71ad1d49d}{int {\bfseries setcompressionstrategy} (int comp\+\_\+strategy)}\label{classgzfilebuf_a47d4b9f1257fd12dd21847b71ad1d49d}

\item 
\hypertarget{classgzfilebuf_a3db8f79036743d42bc51eb9dd7b65b2d}{int {\bfseries is\+\_\+open} () const }\label{classgzfilebuf_a3db8f79036743d42bc51eb9dd7b65b2d}

\item 
\hypertarget{classgzfilebuf_a0ab89070031cbc37679365582180ae3c}{virtual streampos {\bfseries seekoff} (streamoff, ios\+::seek\+\_\+dir, int)}\label{classgzfilebuf_a0ab89070031cbc37679365582180ae3c}

\item 
\hypertarget{classgzfilebuf_ae537a3f86b37de7bf27d2aff0cded07e}{virtual int {\bfseries sync} ()}\label{classgzfilebuf_ae537a3f86b37de7bf27d2aff0cded07e}

\item 
int \hyperlink{classgzfilebuf_ad109ea4fc4ca7cc19d8014b53375255d}{setcompression} (int comp\+\_\+level, int comp\+\_\+strategy=Z\+\_\+\+D\+E\+F\+A\+U\+L\+T\+\_\+\+S\+T\+R\+A\+T\+E\+G\+Y)
\begin{DoxyCompactList}\small\item\em Set compression level and strategy on the fly. \end{DoxyCompactList}\item 
bool \hyperlink{classgzfilebuf_a93ffc20f346d08dc295b799c92becffc}{is\+\_\+open} () const 
\begin{DoxyCompactList}\small\item\em Check if file is open. \end{DoxyCompactList}\item 
\hyperlink{classgzfilebuf}{gzfilebuf} $\ast$ \hyperlink{classgzfilebuf_a9582843a0caa22cb1b4ead1c687dabb2}{open} (const char $\ast$name, std\+::ios\+\_\+base\+::openmode mode)
\begin{DoxyCompactList}\small\item\em Open gzipped file. \end{DoxyCompactList}\item 
\hyperlink{classgzfilebuf}{gzfilebuf} $\ast$ \hyperlink{classgzfilebuf_ae8a47750ca65bc2a43b4768b47f3923a}{attach} (int fd, std\+::ios\+\_\+base\+::openmode mode)
\begin{DoxyCompactList}\small\item\em Attach to already open gzipped file. \end{DoxyCompactList}\item 
\hyperlink{classgzfilebuf}{gzfilebuf} $\ast$ \hyperlink{classgzfilebuf_a280d1c661fb371c22de1214d5a1682a2}{close} ()
\begin{DoxyCompactList}\small\item\em Close gzipped file. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classgzfilebuf_a2f7159c91a60bee86546283caf8de212}{virtual int {\bfseries underflow} ()}\label{classgzfilebuf_a2f7159c91a60bee86546283caf8de212}

\item 
\hypertarget{classgzfilebuf_a7a10ee573ebe6777c8a64e316569f694}{virtual int {\bfseries overflow} (int=E\+O\+F)}\label{classgzfilebuf_a7a10ee573ebe6777c8a64e316569f694}

\item 
bool \hyperlink{classgzfilebuf_ac666248032ec539e409d4e0bedd43ec5}{open\+\_\+mode} (std\+::ios\+\_\+base\+::openmode mode, char $\ast$c\+\_\+mode) const 
\begin{DoxyCompactList}\small\item\em Convert ios open mode int to mode string used by zlib. \end{DoxyCompactList}\item 
virtual std\+::streamsize \hyperlink{classgzfilebuf_afbe2418d8a9c3f4a321cc26aa4ae5f7a}{showmanyc} ()
\begin{DoxyCompactList}\small\item\em Number of characters available in stream buffer. \end{DoxyCompactList}\item 
virtual int\+\_\+type \hyperlink{classgzfilebuf_a23768f9935022e54608c53173f0047c0}{underflow} ()
\begin{DoxyCompactList}\small\item\em Fill get area from gzipped file. \end{DoxyCompactList}\item 
virtual int\+\_\+type \hyperlink{classgzfilebuf_a425a4b0d1890abff8f83d7a5aae344b4}{overflow} (int\+\_\+type c=traits\+\_\+type\+::eof())
\begin{DoxyCompactList}\small\item\em Write put area to gzipped file. \end{DoxyCompactList}\item 
virtual std\+::streambuf $\ast$ \hyperlink{classgzfilebuf_a856bc21f7cfc6ba43f017c9c3f0d5f81}{setbuf} (char\+\_\+type $\ast$p, std\+::streamsize n)
\begin{DoxyCompactList}\small\item\em Installs external stream buffer. \end{DoxyCompactList}\item 
virtual int \hyperlink{classgzfilebuf_a8fdf6b079487c0034cb920c63c9eaf55}{sync} ()
\begin{DoxyCompactList}\small\item\em Flush stream buffer to file. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Gzipped file stream buffer class. 

This class implements basic\+\_\+filebuf for gzipped files. It doesn't yet support seeking (allowed by zlib but slow/limited), putback and read/write access (tricky). Otherwise, it attempts to be a drop-\/in replacement for the standard file streambuf. 

\subsection{Member Function Documentation}
\hypertarget{classgzfilebuf_ae8a47750ca65bc2a43b4768b47f3923a}{\index{gzfilebuf@{gzfilebuf}!attach@{attach}}
\index{attach@{attach}!gzfilebuf@{gzfilebuf}}
\subsubsection[{attach}]{\setlength{\rightskip}{0pt plus 5cm}{\bf gzfilebuf} $\ast$ gzfilebuf\+::attach (
\begin{DoxyParamCaption}
\item[{int}]{fd, }
\item[{std\+::ios\+\_\+base\+::openmode}]{mode}
\end{DoxyParamCaption}
)}}\label{classgzfilebuf_ae8a47750ca65bc2a43b4768b47f3923a}


Attach to already open gzipped file. 


\begin{DoxyParams}{Parameters}
{\em fd} & \hyperlink{class_file}{File} descriptor. \\
\hline
{\em mode} & Open mode flags. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily this} on success, N\+U\+L\+L on failure. 
\end{DoxyReturn}


Here is the call graph for this function\+:


\hypertarget{classgzfilebuf_a280d1c661fb371c22de1214d5a1682a2}{\index{gzfilebuf@{gzfilebuf}!close@{close}}
\index{close@{close}!gzfilebuf@{gzfilebuf}}
\subsubsection[{close}]{\setlength{\rightskip}{0pt plus 5cm}{\bf gzfilebuf}$\ast$ gzfilebuf\+::close (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classgzfilebuf_a280d1c661fb371c22de1214d5a1682a2}


Close gzipped file. 

\begin{DoxyReturn}{Returns}
{\ttfamily this} on success, N\+U\+L\+L on failure. 
\end{DoxyReturn}
\hypertarget{classgzfilebuf_a93ffc20f346d08dc295b799c92becffc}{\index{gzfilebuf@{gzfilebuf}!is\+\_\+open@{is\+\_\+open}}
\index{is\+\_\+open@{is\+\_\+open}!gzfilebuf@{gzfilebuf}}
\subsubsection[{is\+\_\+open}]{\setlength{\rightskip}{0pt plus 5cm}bool gzfilebuf\+::is\+\_\+open (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{classgzfilebuf_a93ffc20f346d08dc295b799c92becffc}


Check if file is open. 

\begin{DoxyReturn}{Returns}
True if file is open. 
\end{DoxyReturn}
\hypertarget{classgzfilebuf_a9582843a0caa22cb1b4ead1c687dabb2}{\index{gzfilebuf@{gzfilebuf}!open@{open}}
\index{open@{open}!gzfilebuf@{gzfilebuf}}
\subsubsection[{open}]{\setlength{\rightskip}{0pt plus 5cm}{\bf gzfilebuf} $\ast$ gzfilebuf\+::open (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{name, }
\item[{std\+::ios\+\_\+base\+::openmode}]{mode}
\end{DoxyParamCaption}
)}}\label{classgzfilebuf_a9582843a0caa22cb1b4ead1c687dabb2}


Open gzipped file. 


\begin{DoxyParams}{Parameters}
{\em name} & \hyperlink{class_file}{File} name. \\
\hline
{\em mode} & Open mode flags. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily this} on success, N\+U\+L\+L on failure. 
\end{DoxyReturn}


Here is the call graph for this function\+:


\hypertarget{classgzfilebuf_ac666248032ec539e409d4e0bedd43ec5}{\index{gzfilebuf@{gzfilebuf}!open\+\_\+mode@{open\+\_\+mode}}
\index{open\+\_\+mode@{open\+\_\+mode}!gzfilebuf@{gzfilebuf}}
\subsubsection[{open\+\_\+mode}]{\setlength{\rightskip}{0pt plus 5cm}bool gzfilebuf\+::open\+\_\+mode (
\begin{DoxyParamCaption}
\item[{std\+::ios\+\_\+base\+::openmode}]{mode, }
\item[{char $\ast$}]{c\+\_\+mode}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}}}\label{classgzfilebuf_ac666248032ec539e409d4e0bedd43ec5}


Convert ios open mode int to mode string used by zlib. 

\begin{DoxyReturn}{Returns}
True if valid mode flag combination. 
\end{DoxyReturn}


Here is the caller graph for this function\+:


\hypertarget{classgzfilebuf_a425a4b0d1890abff8f83d7a5aae344b4}{\index{gzfilebuf@{gzfilebuf}!overflow@{overflow}}
\index{overflow@{overflow}!gzfilebuf@{gzfilebuf}}
\subsubsection[{overflow}]{\setlength{\rightskip}{0pt plus 5cm}gzfilebuf\+::int\+\_\+type gzfilebuf\+::overflow (
\begin{DoxyParamCaption}
\item[{int\+\_\+type}]{c = {\ttfamily traits\+\_\+type\+:\+:eof()}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{classgzfilebuf_a425a4b0d1890abff8f83d7a5aae344b4}


Write put area to gzipped file. 


\begin{DoxyParams}{Parameters}
{\em c} & Extra character to add to buffer contents. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Non-\/\+E\+O\+F on success, E\+O\+F on error.
\end{DoxyReturn}
This actually writes characters in stream buffer to gzipped file. \hyperlink{struct_with}{With} unbuffered output this is done one character at a time. \hypertarget{classgzfilebuf_a856bc21f7cfc6ba43f017c9c3f0d5f81}{\index{gzfilebuf@{gzfilebuf}!setbuf@{setbuf}}
\index{setbuf@{setbuf}!gzfilebuf@{gzfilebuf}}
\subsubsection[{setbuf}]{\setlength{\rightskip}{0pt plus 5cm}std\+::streambuf $\ast$ gzfilebuf\+::setbuf (
\begin{DoxyParamCaption}
\item[{char\+\_\+type $\ast$}]{p, }
\item[{std\+::streamsize}]{n}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{classgzfilebuf_a856bc21f7cfc6ba43f017c9c3f0d5f81}


Installs external stream buffer. 


\begin{DoxyParams}{Parameters}
{\em p} & Pointer to char buffer. \\
\hline
{\em n} & Size of external buffer. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily this} on success, N\+U\+L\+L on failure.
\end{DoxyReturn}
Call setbuf(0,0) to enable unbuffered output. \hypertarget{classgzfilebuf_ad109ea4fc4ca7cc19d8014b53375255d}{\index{gzfilebuf@{gzfilebuf}!setcompression@{setcompression}}
\index{setcompression@{setcompression}!gzfilebuf@{gzfilebuf}}
\subsubsection[{setcompression}]{\setlength{\rightskip}{0pt plus 5cm}int gzfilebuf\+::setcompression (
\begin{DoxyParamCaption}
\item[{int}]{comp\+\_\+level, }
\item[{int}]{comp\+\_\+strategy = {\ttfamily Z\+\_\+DEFAULT\+\_\+STRATEGY}}
\end{DoxyParamCaption}
)}}\label{classgzfilebuf_ad109ea4fc4ca7cc19d8014b53375255d}


Set compression level and strategy on the fly. 


\begin{DoxyParams}{Parameters}
{\em comp\+\_\+level} & Compression level (see zlib.\+h for allowed values) \\
\hline
{\em comp\+\_\+strategy} & Compression strategy (see zlib.\+h for allowed values) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Z\+\_\+\+O\+K on success, Z\+\_\+\+S\+T\+R\+E\+A\+M\+\_\+\+E\+R\+R\+O\+R otherwise.
\end{DoxyReturn}
Unfortunately, these parameters cannot be modified separately, as the previous zfstream version assumed. Since the strategy is seldom changed, it can default and setcompression(level) then becomes like the old setcompressionlevel(level). \hypertarget{classgzfilebuf_afbe2418d8a9c3f4a321cc26aa4ae5f7a}{\index{gzfilebuf@{gzfilebuf}!showmanyc@{showmanyc}}
\index{showmanyc@{showmanyc}!gzfilebuf@{gzfilebuf}}
\subsubsection[{showmanyc}]{\setlength{\rightskip}{0pt plus 5cm}std\+::streamsize gzfilebuf\+::showmanyc (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{classgzfilebuf_afbe2418d8a9c3f4a321cc26aa4ae5f7a}


Number of characters available in stream buffer. 

\begin{DoxyReturn}{Returns}
Number of characters.
\end{DoxyReturn}
This indicates number of characters in get area of stream buffer. These characters can be read without accessing the gzipped file. \hypertarget{classgzfilebuf_a8fdf6b079487c0034cb920c63c9eaf55}{\index{gzfilebuf@{gzfilebuf}!sync@{sync}}
\index{sync@{sync}!gzfilebuf@{gzfilebuf}}
\subsubsection[{sync}]{\setlength{\rightskip}{0pt plus 5cm}virtual int gzfilebuf\+::sync (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{classgzfilebuf_a8fdf6b079487c0034cb920c63c9eaf55}


Flush stream buffer to file. 

\begin{DoxyReturn}{Returns}
0 on success, -\/1 on error.
\end{DoxyReturn}
This calls underflow(\+E\+O\+F) to do the job. \hypertarget{classgzfilebuf_a23768f9935022e54608c53173f0047c0}{\index{gzfilebuf@{gzfilebuf}!underflow@{underflow}}
\index{underflow@{underflow}!gzfilebuf@{gzfilebuf}}
\subsubsection[{underflow}]{\setlength{\rightskip}{0pt plus 5cm}virtual int\+\_\+type gzfilebuf\+::underflow (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{classgzfilebuf_a23768f9935022e54608c53173f0047c0}


Fill get area from gzipped file. 

\begin{DoxyReturn}{Returns}
First character in get area on success, E\+O\+F on error.
\end{DoxyReturn}
This actually reads characters from gzipped file to stream buffer. Always buffered. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
zlib/zlib-\/1.\+2.\+8/contrib/iostream/zfstream.\+h\item 
zlib/zlib-\/1.\+2.\+8/contrib/iostream/zfstream.\+cpp\item 
zlib/zlib-\/1.\+2.\+8/contrib/iostream3/zfstream.\+cc\end{DoxyCompactItemize}
